<div class="max-w-4xl mx-auto px-4 py-8">
  <!-- Back navigation link to the events list -->
  <a
    routerLink="/events"
    class="inline-flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 mb-4"
  >
    <span class="text-lg">←</span>
    Back to events
  </a>

  <!-- Loading state -->
  <ng-container *ngIf="isLoading">
    <p class="text-center text-slate-500">Loading event...</p>
  </ng-container>

  <!-- Error state -->
  <ng-container *ngIf="errorMessage">
    <p class="text-center text-red-500">{{ errorMessage }}</p>
  </ng-container>

  <!-- Main event content - shown only when data is loaded and valid -->
  <ng-container *ngIf="!isLoading && !errorMessage && event as e">
    <div class="bg-white rounded-2xl shadow-md p-6 space-y-4">

      <div class="flex justify-between items-start gap-4">

        <!-- Event main information -->
        <div>
          <!-- Title -->
          <h1 class="text-3xl font-bold text-slate-800">
            {{ e.title }}
          </h1>

          <!-- Location + date -->
          <p class="text-sm text-slate-500">
            {{ e.location }} •
            {{ e.startDate | date: 'medium' }} -
            {{ e.endDate | date: 'shortTime' }}
          </p>

          <!-- Capacity -->
          <p class="text-sm text-slate-600">
            Capacity: {{ e.capacity }}
          </p>

          <!-- Remaining seats (only displayed if calculation succeeded) -->
          <p
            class="text-sm text-slate-600"
            *ngIf="remainingSeats !== null"
          >
            Seats left: {{ remainingSeats }} / {{ e.capacity }}
          </p>

          <!-- Status badge (Upcoming / Ongoing / Finished) -->
          <span class="inline-flex text-xs px-2 py-1 rounded-full bg-slate-100 text-slate-700">
            {{ e | eventStatus }}
          </span>
        </div>

        <!-- Admin or organizer actions -->
        <div *ngIf="canManage" class="flex gap-2">

          <!-- Edit button -->
          <button
            (click)="onEdit()"
            class="px-3 py-1 text-sm rounded-lg bg-amber-500 text-white hover:bg-amber-600"
          >
            Edit
          </button>

          <!-- Delete button -->
          <button
            (click)="onDelete()"
            class="px-3 py-1 text-sm rounded-lg bg-red-500 text-white hover:bg-red-600"
          >
            Delete
          </button>
        </div>
      </div>

      <!-- Description section -->
      <p class="text-sm text-slate-700 leading-relaxed">
        {{ e.description }}
      </p>

    </div>
  </ng-container>
</div>
